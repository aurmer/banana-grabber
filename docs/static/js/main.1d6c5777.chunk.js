(this["webpackJsonpbanana-grabber"]=this["webpackJsonpbanana-grabber"]||[]).push([[0],{37:function(e,a,n){e.exports=n(50)},47:function(e,a,n){},49:function(e,a,n){},50:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),o=n(8),l=n.n(o),c=n(6),i=n(17),s=window.innerHeight,u=window.innerWidth,p=n(36),d=function(e){var a=u-100*1.1*e;return Math.floor(Math.random()*a)},m=function(e){return s+100*1.1*e},v=function(e){return new Promise((function(a){return setTimeout(a,e)}))},y={score:0,gameStarted:!1,gameOver:!1,lives:3,level:0,dropDelay:2,playerName:"",nextLevelOverlay:!1,playedBananas:{},queuedBananas:{}};function f(e){return JSON.parse(JSON.stringify(e))}function g(e,a){var n=f(e),t=b(n);return a>1?(n.queuedBananas[t.id]=t,g(n,a-1)):1===a?(n.queuedBananas[t.id]=t,n):void 0}function b(e,a){var n;return n=a||1/Math.pow(.9,e.level),{id:"banana_".concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var a=16*Math.random()|0;return("x"==e?a:3&a|8).toString(16)}))),xPosition:d(1),speedModifier:n,sizeModifier:1,value:1,rotationOffset:"".concat(360*Math.random(),"deg")}}function E(e){var a=f(e);return a.level++,a.dropDelay=2*Math.pow(.75,e.level),a.nextLevelOverlay=!0,a}var h=Object(i.b)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0,n=f(e);switch(a.type){case"PLAYER_NAMED":var t=a.payload.playerName;n.playerName=t,n.gameStarted=!0,n.playedBananas={},n=E(n);break;case"START_LEVEL":n.nextLevelOverlay=!1,n=g(n,n.level);break;case"BANANA_FETCHED":var r=Object.values(n.queuedBananas);if(r.length){var o=Object.values(n.queuedBananas)[0];n.playedBananas[o.id]=o,delete n.queuedBananas[o.id]}break;case"BANANA_CREATED":var l=b(n);n.playedBananas[l.id]=l;break;case"BANANA_CLICKED":var c=a.payload.banana_id;n.score+=n.playedBananas[c].value,delete n.playedBananas[c],0===Object.keys(n.playedBananas).length&&0===Object.keys(n.queuedBananas).length&&(n=E(n));break;case"BANANA_MISSED":var i=a.payload.banana_id;if(delete n.playedBananas[i],!n.gameStarted||n.gameOver)break;n.lives--,0===n.lives?(n.gameOver=!0,n.level=0,n.playedBananas={}):0===Object.keys(n.playedBananas).length&&0===Object.keys(n.queuedBananas).length&&(n=E(n));break;case"REPLAY":n=y}return n}}),x=Object(i.c)(h),B=(n(47),n(48),n(12)),O=n(14),S=n(13),N=n(54),A=n(56),w=function(e){Object(O.a)(n,e);var a=Object(S.a)(n);function n(e){var t;return Object(B.a)(this,n),(t=a.call(this,e)).updateInput=function(e){t.setState({playerName:e})},t.updateInput_Event=function(e){return t.updateInput(e.target.value)},t.handleSubmit=function(){t.props.playerNamed(t.state.playerName),t.setState({playerName:""})},t.handleSubmitOnEnter=function(e){13!==e.which&&13!==e.keyCode||t.handleSubmit()},t.render=function(){return r.a.createElement(N.a,{show:!0,backdrop:"static"},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Title,null,"Welcome To Go, Go, Bananas")),r.a.createElement(N.a.Body,null,"Enter your player name",r.a.createElement("input",{name:"playerName",id:"playerName",value:t.state.playerName,onChange:t.updateInput_Event,onKeyPress:t.handleSubmitOnEnter,autoComplete:"off",style:{marginLeft:"20px"}})),r.a.createElement(N.a.Footer,null,r.a.createElement(A.a,{variant:"primary",onClick:t.handleSubmit},"Submit")))},t.state={playerName:""},t}return n}(r.a.Component);var k=Object(c.b)((function(e){return{playerName:e.gameState.playerName}}),{playerNamed:function(e){return{type:"PLAYER_NAMED",payload:{playerName:e}}}})(w);function j(e,a){return r.a.createElement("li",{key:a},e.playerName," - ",e.score)}var M=Object(c.b)((function(e){return{playerName:e.gameState.playerName,score:e.gameState.score}}),{replay:function(){return{type:"REPLAY",payload:{}}}})((function(e){var a=function(e,a){var n=window.localStorage.getItem("topScores")||"[]";n=JSON.parse(n);var t=[].concat(Object(p.a)(n),[{playerName:e,score:a}]);return t=t.sort((function(e,a){return a.score-e.score})).slice(0,10),window.localStorage.setItem("topScores",JSON.stringify(t)),t}(e.playerName,e.score);return a=a.map(j),r.a.createElement(N.a,{show:!0,backdrop:"static"},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Title,null,"Game Over")),r.a.createElement(N.a.Body,null,r.a.createElement("h2",null,"Top Scores"),r.a.createElement("ol",null,a)),r.a.createElement(N.a.Footer,null,r.a.createElement(A.a,{variant:"primary",onClick:e.replay},"Replay")))})),D=function(e){Object(O.a)(n,e);var a=Object(S.a)(n);function n(){var e;Object(B.a)(this,n);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).componentDidMount=function(){},e.componentDidUpdate=function(){},e.nextCount=function(){var a=document.getElementById("countdown").innerHTML-1;0===a?e.props.startLevel():document.getElementById("countdown").innerHTML=a},e.render=function(){return r.a.createElement(N.a,{show:!0,backdrop:!1,animation:!1,centered:!0,style:{border:"none",textAlign:"center"},size:"sm"},r.a.createElement(N.a.Body,null,r.a.createElement("h2",null,"Level ",e.props.level),r.a.createElement("h1",{id:"countdown",className:"level-number",onAnimationIteration:e.nextCount},"3")))},e}return n}(r.a.Component);var C=Object(c.b)((function(e){return{level:e.gameState.level}}),{startLevel:function(){return{type:"START_LEVEL",payload:{}}}})(D),L=n(55),T=n(52),_=n(53),I=function(e){Object(O.a)(n,e);var a=Object(S.a)(n);function n(){var e;Object(B.a)(this,n);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).bananaClicked=function(a){e.props.clickedBanana(a.id)},e.clickedEvent=function(a){e.bananaClicked(a.currentTarget)},e.initializeDrop=function(a){a&&(a.style.transform="translate(".concat(e.props.xPosition,"px,").concat(m(e.props.sizeModifier),"px) rotate(").concat(e.props.rotationOffset,")"))},e.initializeDropEvent=function(a){return e.initializeDrop(a.currentTarget)},e.transitionEndEvent=function(a){e.props.missedBanana(a.currentTarget.id)},e.componentDidMount=function(){setTimeout((function(){return e.initializeDrop(document.getElementById(e.props.id))}),50)},e.render=function(){var a={height:"".concat(100*e.props.sizeModifier,"px"),width:"".concat(100*e.props.sizeModifier,"px"),transitionDuration:"".concat(Math.floor(4/e.props.speedModifier),"s"),transform:"translate(".concat(e.props.xPosition,"px,").concat(-100*e.props.sizeModifier,"px) rotate(").concat(e.props.rotationOffset,")")},n={animationDuration:"".concat(Math.floor(4/e.props.speedModifier),"s")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:e.props.id,className:"bananaContainer",style:a,onMouseDown:e.clickedEvent,onTransitionEnd:e.transitionEndEvent},r.a.createElement("div",{className:"bananaImage",style:n})))},e}return n}(r.a.Component);var z=Object(c.b)((function(e){return{}}),{missedBanana:function(e){return{type:"BANANA_MISSED",payload:{banana_id:e}}},clickedBanana:function(e){return{type:"BANANA_CLICKED",payload:{banana_id:e}}}})(I),P=function(e){Object(O.a)(n,e);var a=Object(S.a)(n);function n(){var e;Object(B.a)(this,n);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).componentDidMount=function(){e.setState({endlessBananas:e.endlessBananas()}),e.setState({nextBanana:e.nextBanana()})},e.nextBanana=function(){var a=1e3*e.props.dropDelay;v(a).then((function(){e.props.fetchedBanana()})).then(e.nextBanana)},e.endlessBananas=function(){return new Promise((function(a){v(100).then((function(){e.props.gameStarted&&!e.props.gameOver||e.props.createdBanana()})).then(e.endlessBananas)}))},e.bananaMapper=function(e){return r.a.createElement(z,Object.assign({},e,{key:e.id}))},e.render=function(){var a=e.props.playedBananas,n=Object.values(a).map(e.bananaMapper),t=e.props.gameStarted,o=r.a.createElement(L.a,{style:{position:"absolute",right:"20px",bottom:"20px",margin:"0"},show:t},r.a.createElement(L.a.Body,{style:{userSelect:"none"}},"Go, Go, Bananas ",r.a.createElement("br",null),"level: ",e.props.level," ",r.a.createElement("br",null),"score: ",e.props.score," ",r.a.createElement("br",null),"lives left: ",e.props.lives));return r.a.createElement(T.a,{noGutters:"true"},r.a.createElement(_.a,null,r.a.createElement("div",{style:{height:"100vh",backgroundColor:"rgba(0,0,0,0)",zIndex:"10",position:"relative",overflow:"hidden"}},o,n)))},e}return n}(r.a.Component);var q=Object(c.b)((function(e){return{score:e.gameState.score,lives:e.gameState.lives,playedBananas:e.gameState.playedBananas,level:e.gameState.level,dropDelay:e.gameState.dropDelay,gameStarted:e.gameState.gameStarted,gameOver:e.gameState.gameOver,bananasLeft:Object.keys(e.gameState.queuedBananas).length,bananasFetched:Object.keys(e.gameState.playedBananas).length}}),{fetchedBanana:function(){return{type:"BANANA_FETCHED",payload:{}}},createdBanana:function(){return{type:"BANANA_CREATED",payload:{}}}})(P);n(49);var R=Object(c.b)((function(e){return{gameStarted:e.gameState.gameStarted,notifications:!1,gameOver:e.gameState.gameOver,nextLevelOverlay:e.gameState.nextLevelOverlay}}))((function(e){var a=[];return!1===e.gameStarted&&a.push(r.a.createElement(k,{key:"welcome"})),!0===e.notifications&&a.push(r.a.createElement(r.a.Fragment,null)),!0===e.gameOver&&a.push(r.a.createElement(M,{key:"gameover"})),!0===e.nextLevelOverlay&&a.push(r.a.createElement(C,{key:"levelup"})),r.a.createElement(r.a.Fragment,null,a,r.a.createElement(q,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=document.getElementById("root");l.a.render(r.a.createElement(c.a,{store:x},r.a.createElement(R,null)),F),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.1d6c5777.chunk.js.map